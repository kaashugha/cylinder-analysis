<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Create Report</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../static/style.css" />
    <link type="text/css" rel="stylesheet" href="../static/waitMe.css">
  </head>
  <body id="htmlpage">
      
       <header>
         <div class="container-fluid">
          {% if session['user'] %}
              <a href="/logout" class="logout_bnt_section">
              Logout {{ session['user'] }}<img src="../static/logout.png" alt="logout" class="logout_header_img">
          </a>
          {% endif %}
         </div>
      </header>
      
    <div class="main_home_section_ticket">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="section_ticket_section">
              <div class="ticket_section_header">
                <h4>Create Report</h4>
                <button>X</button>
              </div>
              <!-- ticket_section_header -->
              <div class="ticket_section_body">
                <form method="POST">
                  <fieldset>
                    <legend>Generate Engineering Report</legend>
                    <div class="row">
                      <div class="col-md-6">
                        <div class="col-md-12 mb-3">
                          <div class="row">
                            <label class="col-md-5"> Batch ID </label>
                            <div class="col-md-7">
                              <select name="
                              " id="bid_ca" tabindex="2" data-noreset="true" required>
                                <option disabled selected value> -- select an option -- </option>
                                {% for client in bid_cax %} -->
                                  <option value={{client}}>{{ client[0] }}</option>
                                {% endfor %}
                              </select>
                            </div>
                          </div>
                        </div>
                        <!-- 1 -->
                        <div class="col-md-12 mb-3">
                          <div class="row">
                            <label class="col-md-5"> SAFFA Designation </label>
                            <div class="col-md-7">
                              <select name="sid_ca" id="sid_ca" required>
                              </select>
                            </div>
                          </div>
                        </div>
                        <!-- 2 -->
                      </div>
                      <!-- Left Column -->
                      <div class="col-md-2">
                        <input
                          type="button"
                          name="batch"
                          value="Add"
                          onclick="add_id()"
                          class="btn btn-info border-0 mb-2"
                        />
                        <input
                        type="button"
                        name="batch"
                        value="TEST"
                        onclick="test()"
                        class="btn btn-info border-0 mb-2"
                      />
                        <input
                        type="button"
                        name="batch"
                        value="Remove"
                        onclick="remove_id()"
                        class="btn btn-danger border-0 mb-2"
                        />
                      </div>
                      <div class="col-md-4">
                        <select
                          class="form-select"
                          id="selected_id"
                          name="selected_id"
                          multiple
                          aria-label="multiple select example"
                        >
                        </select>
                      </div>
                      <!-- Left Column -->
                    </div>
                    <div class="create_data_cylinder_analysis_table">
                      <div class="row">
                        <div class="table-responsive-custom-large">
                            {{ search_data_html|safe }}
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-12 text-center">
                          <button 
                            type="submit"
                            id="submitbtn"
                            class="generate_report_middle_section_add btn btn-info"
                          >
                            Generate Report
                          </button>
                        </div>
                      </div>
                    </div>
                  </fieldset>
                </form>
                <div class="footer_Sectoin_area_list0003">
                  <img src="../static/footer_icons.png" class="foot_icons" alt="img" />
                </div>
              </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      $(document).ready(function () {
        $(".rowMai1").click(function () {
          $(".rowMai1").toggleClass("rowOpenCreate");
        });
        //1
        $(".rowMai2").click(function () {
          $(".rowMai2").toggleClass("rowOpenCreate");
        });
        //2
        $(".rowMai3").click(function () {
          $(".rowMai3").toggleClass("rowOpenCreate");
        });
        //3
        $(".rowMai4").click(function () {
          $(".rowMai4").toggleClass("rowOpenCreate");
        });
        //4
        $(".rowMai5").click(function () {
          $(".rowMai5").toggleClass("rowOpenCreate");
        });
        //5
        $(".rowMai6").click(function () {
          $(".rowMai6").toggleClass("rowOpenCreate");
        });
        //6
        $(".rowMai7").click(function () {
          $(".rowMai7").toggleClass("rowOpenCreate");
        });
        //7
        $(".rowMai8").click(function () {
          $(".rowMai8").toggleClass("rowOpenCreate");
        });
        //8
        $(".rowMai9").click(function () {
          $(".rowMai9").toggleClass("rowOpenCreate");
        });
        //9
        $(".rowMai10").click(function () {
          $(".rowMai10").toggleClass("rowOpenCreate");
        });
        //10
        $(".rowMai11").click(function () {
          $(".rowMai11").toggleClass("rowOpenCreate");
        });
        //11
        $(".rowMai12").click(function () {
          $(".rowMai12").toggleClass("rowOpenCreate");
        });
        //12
        $(".rowMai13").click(function () {
          $(".rowMai13").toggleClass("rowOpenCreate");
        });
        //13
        $(".rowMai14").click(function () {
          $(".rowMai14").toggleClass("rowOpenCreate");
        });
        //14
        $(".rowMai15").click(function () {
          $(".rowMai15").toggleClass("rowOpenCreate");
        });
        //15
      });
    </script>
    <script>
      document.getElementById('bid_ca').onchange = function() {
          var bid_ca = this.value;
  
          $.ajax({
              type: 'POST',
              data: JSON.stringify({
                  'bid_ca': bid_ca,
              }),
              contentType: 'application/json; charset=utf-8',
              url: "{{ url_for('sid_list') }}",
              success: function(data) {
                $("#sid_ca").empty();
                for (var i = 0; i < data.length; i++) {
                  $("#sid_ca").append('<option>' + data[i] + '</option>');
                }
              }
          });
      }
      </script>
      <script>
        function add_id() {
          
          var sidArray= new Array();
          var sidElement = document.getElementById('selected_id');

          for (i = 0; i < sidElement.options.length; i++) {
            sidArray[i] = sidElement.options[i].value;
          }

          var sid = document.getElementById('sid_ca').value;

          var bool = false;

          if (!sidArray.includes(sid) && sid != '') {
            var option = document.createElement("option");
            option.text = sid;
            var select = document.getElementById("selected_id");
            select.appendChild(option);
          }
        }
        function remove_id() {
          var x = document.getElementById("selected_id");
          x.remove(x.selectedIndex);
        }
      </script>
    <script src="../static/waitMe.js"></script> 
    <script>
      $(function(){
      // none, bounce, rotateplane, stretch, orbit, 
      // roundBounce, win8, win8_linear or ios
      var current_effect = 'win8_linear'; // 
      


      // $('#submitbtn').click(function(){
      // run_waitMe(current_effect);
      // });
      
      function run_waitMe(effect){
      $('#htmlpage').waitMe({
      effect: 'win8_linear',

      //place text under the effect (string).
      text: 'Please Wait...',
      
      //background for container (string).
      bg: 'rgba(255,255,255,0.7)',
      
      //color for background animation and text (string).
      color: '#123',
      
      //max size
      maxSize: '8',
      
      //wait time im ms to close
      waitTime: -1,
      
      //url to image
      source: '',
      
      //or 'horizontal'
      textPos: 'vertical',
      
      //font size
      fontSize: '8',
      
      // callback
      onClose: function() {}
      
      });
      }
        
      });
      </script>
      <script>
      $(document).ready(function () {
        $('#search_data').DataTable({
          columns: [
            null,
            null,
            null,
            null,
            null],
        });
      });
      </script>
      <script>
        function test() {
          var selectobject=document.getElementById("selected_id")
          var sid_array = [];

          for (var i=0; i<selectobject.length; i++){
          sid_array.push(selectobject.options[i].text)
          }

              $.ajax(
                    {
                        type:'POST',
                        contentType:'application/json;charset-utf-08',
                        data: {name:sid_array},
                        url:'http://127.0.0.1:5000/test?value=' + sid_array,
                        success:function (data) {
                            var reply=data.reply;
                            if (reply=="success")
                            {
                                return;
                            }
                            else
                                {
                                alert("some error ocured in session agent")
                                }

                        }
                    }
                );
      }
      </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
